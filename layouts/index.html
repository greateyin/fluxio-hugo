{{ define "main" }}

<!-- Hero Section with Carousel -->
<!-- Hero Section with Sidebar -->
<section class="hero-section py-5">
    <div class="container-fluid px-5">
        <div class="row">
            <!-- Main Hero Article (Left Column) -->
            <div class="col-lg-8 mb-4">
                {{ $latestNews := where site.RegularPages "Section" "news" }}
                {{ $heroPost := index ($latestNews.ByDate.Reverse) 0 }}
                {{ with $heroPost }}
                <div class="hero-card glass-card p-5" style="min-height: 500px; display: flex; align-items: center;">
                    <div class="row align-items-center w-100">
                        <div class="col-lg-5">
                            <div class="hero-content">
                                {{ $titleLen := len .Title }}
                                {{ $titleSize := "clamp(1.6rem, 2vw + 0.9rem, 2rem)" }}
                                {{ if gt $titleLen 80 }}
                                  {{ $titleSize = "clamp(1.4rem, 1.6vw + 0.8rem, 1.8rem)" }}
                                {{ else if gt $titleLen 60 }}
                                  {{ $titleSize = "clamp(1.5rem, 1.8vw + 0.85rem, 1.9rem)" }}
                                {{ end }}
                                <h1 class="hero-title mb-3"
                                    style="font-size: {{ $titleSize | safeCSS }}; font-weight: 800; line-height: 1.15; color: var(--text-primary);">
                                    {{ .Title }}
                                </h1>
                                <p class="hero-excerpt mb-4"
                                    style="color: var(--text-secondary); font-size: 1.1rem; line-height: 1.6;">
                                    {{ .Summary | truncate 150 }}
                                </p>
                                <div class="hero-meta mb-4" style="color: var(--text-muted); font-size: 0.9rem;">
                                    {{ .PublishDate.Format "Jan 02, 2006" }}
                                </div>
                                <a href="{{ .Permalink }}" class="btn-read">
                                    Read More <i class="ti-arrow-right ml-2"></i>
                                </a>
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="hero-image-wrapper"
                                style="border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
                                {{ partial "image.html" (dict "Src" .Params.Image "Alt" .Title "Class" "img-fluid w-100") }}
                            </div>
                        </div>
                    </div>
                </div>
                {{ end }}
            </div>

            <!-- Right Sidebar (Trending & Social) -->
            <div class="col-lg-4">
                <!-- Sponsored / Ad Placeholder -->
                <div class="sidebar-widget glass-card p-3 mb-4 text-center" style="background: rgba(255,255,255,0.5);">
                    <span
                        style="font-size: 0.7rem; font-weight: 700; letter-spacing: 1px; color: var(--text-muted); text-transform: uppercase;">Sponsored</span>
                    <div class="ad-placeholder mt-2"
                        style="height: 100px; background: rgba(139, 92, 246, 0.05); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--accent-color); font-weight: 600;">
                        Ad Space / Partnership
                    </div>
                </div>

                <!-- Trending News -->
                <div class="sidebar-widget glass-card p-4 mb-4">
                    <h5 class="widget-title mb-4"
                        style="font-size: 0.9rem; font-weight: 800; text-transform: uppercase; letter-spacing: 1px;">
                        Trending News</h5>
                    <div class="trending-list">
                        <!-- Static Mockup Items -->
                        <div class="trending-item mb-3 pb-3" style="border-bottom: 1px solid rgba(0,0,0,0.05);">
                            <div class="d-flex align-items-start">
                                <div class="trending-icon mr-3"
                                    style="background: rgba(139, 92, 246, 0.1); padding: 8px; border-radius: 8px; color: var(--accent-color);">
                                    <i class="ti-stats-up"></i>
                                </div>
                                <div>
                                    <h6
                                        style="font-size: 0.95rem; font-weight: 700; margin-bottom: 4px; line-height: 1.3;">
                                        <a href="#" class="text-dark text-decoration-none">AI Analysis Tools Surge in
                                            Popularity</a>
                                    </h6>
                                    <span style="font-size: 0.75rem; color: var(--text-muted);">2 hours ago</span>
                                </div>
                            </div>
                        </div>
                        <div class="trending-item mb-3 pb-3" style="border-bottom: 1px solid rgba(0,0,0,0.05);">
                            <div class="d-flex align-items-start">
                                <div class="trending-icon mr-3"
                                    style="background: rgba(139, 92, 246, 0.1); padding: 8px; border-radius: 8px; color: var(--accent-color);">
                                    <i class="ti-bolt"></i>
                                </div>
                                <div>
                                    <h6
                                        style="font-size: 0.95rem; font-weight: 700; margin-bottom: 4px; line-height: 1.3;">
                                        <a href="#" class="text-dark text-decoration-none">New Crypto Regulations
                                            Announced</a>
                                    </h6>
                                    <span style="font-size: 0.75rem; color: var(--text-muted);">5 hours ago</span>
                                </div>
                            </div>
                        </div>
                        <div class="trending-item">
                            <div class="d-flex align-items-start">
                                <div class="trending-icon mr-3"
                                    style="background: rgba(139, 92, 246, 0.1); padding: 8px; border-radius: 8px; color: var(--accent-color);">
                                    <i class="ti-world"></i>
                                </div>
                                <div>
                                    <h6
                                        style="font-size: 0.95rem; font-weight: 700; margin-bottom: 4px; line-height: 1.3;">
                                        <a href="#" class="text-dark text-decoration-none">Global Tech Summit
                                            Highlights</a>
                                    </h6>
                                    <span style="font-size: 0.75rem; color: var(--text-muted);">1 day ago</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Connect With Us -->
                <div class="sidebar-widget glass-card p-4">
                    <h5 class="widget-title mb-4"
                        style="font-size: 0.9rem; font-weight: 800; text-transform: uppercase; letter-spacing: 1px;">
                        Connect With Us</h5>
                    <a href="#" class="btn btn-block btn-outline-dark mb-2"
                        style="border-radius: 100px; font-weight: 600; border-width: 2px;">
                        <i class="ti-twitter-alt mr-2"></i> Follow on Twitter
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content Grid -->
<section class="main-content-grid py-4">
    <div class="container-fluid px-5">
        <div class="row">

            <!-- Latest Articles (Left Column) -->
            <div class="col-lg-4 mb-4">
                <h3 class="section-title mb-4"
                    style="font-size: 1.2rem; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; color: var(--text-primary);">
                    Latest Articles</h3>

                {{ $latest := first 5 (where site.RegularPages "Type" "news") }}
                {{ range $latest }}
                <article class="article-list-item glass-card mb-3 p-3" style="transition: transform 0.2s ease;">
                    <div class="row align-items-center">
                        <div class="col-4">
                            <div style="border-radius: 12px; overflow: hidden; aspect-ratio: 1;">
                                {{ partial "image.html" (dict "Src" .Params.Image "Alt" .Title "Class" "img-fluid h-100 w-100 object-fit-cover") }}
                            </div>
                        </div>
                        <div class="col-8">
                            <h6 style="font-size: 0.95rem; font-weight: 700; line-height: 1.4; margin-bottom: 6px;">
                                <a href="{{ .Permalink }}" class="text-decoration-none"
                                    style="color: var(--text-primary);">{{ .Title | truncate 50 }}</a>
                            </h6>
                            <span style="font-size: 0.75rem; color: var(--text-muted); font-weight: 500;">
                                <i class="ti-time mr-1"></i> {{ .PublishDate.Format "Jan 02, 2006" }}
                            </span>
                        </div>
                    </div>
                </article>
                {{ end }}
            </div>

            <!-- Featured Stories (Middle Column) -->
            <div class="col-lg-8 mb-4">
                <h3 class="section-title mb-4"
                    style="font-size: 1.2rem; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; color: var(--text-primary);">
                    Featured Stories</h3>

                <div class="row">
                    {{ $featuredStories := first 4 (where site.RegularPages "Type" "news") }}
                    {{ range $featuredStories }}
                    <div class="col-md-6 mb-4">
                        <article class="featured-story-card glass-card h-100 p-0 overflow-hidden"
                            style="display: flex; flex-direction: column;">
                            <div style="height: 200px; overflow: hidden;">
                                {{ partial "image.html" (dict "Src" .Params.Image "Alt" .Title "Class" "img-fluid w-100 h-100 object-fit-cover") }}
                            </div>
                            <div class="p-4 flex-grow-1 d-flex flex-column">
                                <h4 style="font-size: 1.2rem; font-weight: 700; line-height: 1.3; margin-bottom: 12px;">
                                    <a href="{{ .Permalink }}" class="text-decoration-none"
                                        style="color: var(--text-primary);">{{ .Title | truncate 60 }}</a>
                                </h4>
                                <p
                                    style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 16px; line-height: 1.6; flex-grow: 1;">
                                    {{ .Summary | truncate 100 }}
                                </p>
                                <div class="d-flex justify-content-between align-items-center mt-auto">
                                    <span style="font-size: 0.8rem; color: var(--text-muted);">{{ .PublishDate.Format
                                        "Jan 02, 2006" }}</span>
                                    <a href="{{ .Permalink }}" class="text-accent font-weight-bold"
                                        style="font-size: 0.85rem;">Read <i class="ti-arrow-right ml-1"></i></a>
                                </div>
                            </div>
                        </article>
                    </div>
                    {{ end }}
                </div>


            </div>
        </div>
    </div>
</section>



{{ end }}
