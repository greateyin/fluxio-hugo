<aside class="hero-sidebar">
    <!-- Search inside sidebar, matching reference layout -->
    {{ if site.Params.search }}
    <form class="hero-sidebar-search position-relative mb-4" action="{{ "search" | relLangURL }}">
        <input class="hero-sidebar-search-input" type="search" placeholder="{{ i18n "search_placeholder" }}"
            id="sidebar-search-query" name="s">
        <button class="hero-sidebar-search-icon border-0 bg-transparent" type="submit">
            <i class="ti-search text-muted"></i>
        </button>
    </form>
    {{ end }}

    <div class="widget pt-2">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="widget-title mb-0">{{ i18n "recommended" }}</h5>
            <a href="{{ "news" | absLangURL }}" class="text-muted small font-weight-bold text-decoration-none">{{ i18n
                "view_all" }} ></a>
        </div>

        {{ $recommended := where site.RegularPages "Type" "news" }}
        {{ with index $recommended 0 }}
        <!-- First recommended as large card -->
        <a href="{{ .Permalink }}" class="recommended-featured-card d-block mb-3 text-decoration-none">
            {{ $img := or .Params.image site.Params.default_image }}
            {{ if $img }}
            <div class="recommended-featured-thumb">
                <img src="{{ $img | absURL }}" alt="{{ .Title }}"
                    onerror="this.onerror=null;this.src='{{ site.Params.default_image | absURL }}';">
            </div>
            {{ end }}
            <div class="recommended-featured-body">
                <span class="text-primary small font-weight-bold d-block mb-1">{{ index .Params.categories 0 }}</span>
                <h6 class="font-weight-bold mb-1">{{ .Title }}</h6>
                <span class="text-muted small">{{ .PublishDate.Format "4 hours ago" }}</span>
            </div>
        </a>
        {{ end }}

        <!-- Remaining recommended items -->
        {{ range $i, $p := $recommended }}
        {{ if gt $i 0 }}
        {{ if lt $i 5 }}
        <div class="recommended-item d-flex align-items-start">
            <div class="mr-3" style="flex: 1;">
                <span class="text-primary small font-weight-bold d-block mb-1" style="font-size: 0.75rem;">{{ index
                    $p.Params.categories 0 }}</span>
                <h6 class="mt-0 mb-1 font-weight-bold" style="font-size: 0.95rem; line-height: 1.4; color: #334155;">
                    <a href="{{ $p.Permalink }}" class="text-dark text-decoration-none">{{ $p.Title }}</a>
                </h6>
                <span class="text-muted small" style="font-size: 0.75rem;">{{ $p.PublishDate.Format "4h ago" }}</span>
            </div>
            {{ $thumb := or $p.Params.image site.Params.default_image }}
            {{ if $thumb }}
            <img src="{{ $thumb | absURL }}" alt="{{ $p.Title }}"
                style="width: 70px; height: 70px; object-fit: cover;"
                onerror="this.onerror=null;this.src='{{ site.Params.default_image | absURL }}';">
            {{ end }}
        </div>
        {{ end }}
        {{ end }}
        {{ end }}
    </div>
</aside>
